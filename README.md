Этот файл предоставляет полное описание проекта, инструкции по установке и использованию, а также информацию о тестировании.

---

# Crypto Lab: Симметричная система шифрования

[![Go Version](https://img.shields.io/badge/Go-1.20-blue)](https://golang.org/) [![License](https://img.shields.io/badge/License-MIT-green)](LICENSE)

## Описание проекта

Этот проект представляет собой утилиту командной строки для шифрования и дешифрования данных с использованием собственной симметричной криптосистемы. Программа поддерживает обработку как отдельных файлов, так и целых каталогов, сохраняя их структуру при шифровании.

Основные особенности:
- **Симметричное шифрование**: Используется один ключ для шифрования и дешифрования.
- **Генерация ключа**: Ключ создается из парольной фразы с использованием собственной хэш-функции.
- **Обработка каталогов**: Рекурсивная обработка всех файлов и подкаталогов.
- **Прохождение NIST тестов**: Зашифрованные данные успешно проходят строгие тесты на случайность.
- **Высокая производительность**: Программа обрабатывает большие файлы (например, 200 МБ) за разумное время.

---

## Содержание

1. [Требования](#требования)
2. [Установка](#установка)
3. [Использование](#использование)
4. [Тестирование](#тестирование)
5. [Логирование](#логирование)
6. [Структура проекта](#структура-проекта)
7. [Лицензия](#лицензия)

---

## Требования

Для работы программы необходимы:
- **Go**: Версия 1.20 или выше.
- **Операционная система**: Linux, macOS или Windows.

---

## Установка

1. Убедитесь, что у вас установлен Go:
   ```bash
   go version
   ```

2. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/yourusername/crypto_lab.git
   cd crypto_lab
   ```

3. Соберите программу:
   ```bash
   make build
   ```
   Или вручную:
   ```bash
   go build -o crypto_tool ./cmd/main.go
   ```

4. Проверьте, что программа работает:
   ```bash
   ./crypto_tool --help
   ```

---

## Использование

### Шифрование файла
```bash
./crypto_tool -mode encrypt -dir input.txt -password mypassword -output encrypted.txt -verbose
```

### Дешифрование файла
```bash
./crypto_tool -mode decrypt -dir encrypted.txt -password mypassword -output decrypted.txt -verbose
```

### Обработка каталога
```bash
./crypto_tool -mode encrypt -dir input_dir -password mypassword -output encrypted_dir -verbose
```

#### Аргументы командной строки:
- `-mode`: Режим работы (`encrypt` или `decrypt`).
- `-dir`: Путь к входному файлу или каталогу.
- `-password`: Парольная фраза для генерации ключа.
- `-output`: Путь к выходному файлу или каталогу.
- `-verbose`: Включает подробный вывод логов.

---

## Тестирование

Запустите все тесты:
```bash
make test
```

Или вручную:
```bash
go test ./... -v
```

Тесты проверяют:
- Корректность шифрования и дешифрования.
- Генерацию ключа.
- Логирование.
- Обработку каталогов.

---

## Логирование

Программа записывает логи в файл `logs/app.log`. Если включен режим `-verbose`, дополнительная информация будет выведена в терминал.

Пример содержимого логов:
```
Verbose mode enabled
Starting in encrypt mode
Input: test.txt
Output: encrypted.txt
Generated key: [ab cd ef ... ff]
Encrypted file saved to encrypted.txt (1.234ms)
Operation completed successfully in 1.567ms
```

---

## Структура проекта

```
crypto_lab/
├── cmd/
│   └── main.go               # Главный файл программы
├── crypto/
│   ├── crypto.go             # Реализация криптографических алгоритмов
│   └── crypto_test.go        # Тесты для функций из crypto.go
├── utils/
│   ├── custom_hash.go        # Реализация собственной хэш-функции
│   ├── utils.go              # Вспомогательные функции (генерация ключа, логирование)
│   └── utils_test.go         # Тесты для функций из utils.go
├── logs/                     # Директория для логов
│   └── app.log               # Файл логов
├── Makefile                  # Файл для автоматизации сборки и тестирования
└── tests/                    # Дополнительные тестовые файлы (если есть)
    └── main_test.go          # Тесты для функций из main.go
```
